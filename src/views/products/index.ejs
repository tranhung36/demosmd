<section id="featured" class="my-5 py-5">
    <div class="container mt-5 py-5">
        <h3>Our Products</h3>
        <hr>
        <p>Voluptatibus doloremque fuga odit at nisi incidunt molestiae fugiat dignissimos</p>
    </div>
    <div class="row mx-auto container">
        <% products.forEach(product => { %>
        <div class="product text-center col-lg-3 col-md-4 col-12">
            <img src="<%= product.image %>" alt="" class="img-fluid mb-3">
            <div class="star">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
            </div>
            <h5 class="product-name">
                <%= product.title %>
            </h5>
            <h4 class="product-price">
                $<%= product.price %>
            </h4>
            <button class="buy-btn"><a id="buy" href="/products/edit/<%= product._id %>">Buy Now</a></button>
        </div>
        <% }) %>
    </div>
    <% if (pages > 0) { %>
    <nav class="container" aria-label="...">
        <ul class="pagination mt-5">
            <% if (current == 1) { %>
            <li class="page-item disabled">
                <a class="page-link" href="/products">First</a>
            </li>
            <%} else { %>
            <li class="page-item">
                <a class="page-link" href="/products">First</a>
            </li>
            <% } %>
            <% let i = (Number(current) > 3 ? Number(current) - 2 : 1) %>
            <% if(i !== 1) { %>
            <li class="page-item disabled">
                <a class="page-link" href="#">...</a>
            </li>
            <% } %>
            <% for(; i <= (Number(current) + 2) && i <= pages; i++) { %>
            <% if(i == current) { %>
            <li class="page-item active">
                <a class="page-link" href="/products?page=<%= i %>">
                    <%= i %>
                </a>
            </li>
            <% } else { %>
            <li class="page-item">
                <a class="page-link" href="/products?page=<%= i %>">
                    <%= i %>
                </a>
            </li>
            <% } %>
            <% if (i == Number(current) + 2 && i < pages) { %>
            <li class="page-item disabled">
                <a class="page-link" href="#">...</a>
            </li>
            <% } %>
            <% } %>
            <% if(current == pages) { %>
            <li class="page-item disabled">
                <a class="page-link" href="#">
                    Last
                </a>
            </li>
            <% } else { %>
            <li class="page-item">
                <a class="page-link" href="/products?page=<%= pages %>">
                    Last
                </a>
            </li>
            <% } %>
        </ul>
    </nav>
    <% } %>
</section>